<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>爱 煦 - 我的</title>
<!--
Holiday Template
http://www.templatemo.com/tm-475-holiday
-->
  <link href="css/font-awesome.min.css" rel="stylesheet">
  <link href="css/bootstrap.min.css" rel="stylesheet">
  <link href="css/bootstrap-datetimepicker.min.css" rel="stylesheet">  
  <link href="css/flexslider.css" rel="stylesheet">
  <link href="css/templatemo-style.css" rel="stylesheet">

  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

  </head>
  <body class="tm-gray-bg">
  	<!-- Header -->
  	<div class="tm-header">
  		<div class="container">
  			<div class="row">
  				<div class="col-lg-6 col-md-4 col-sm-3 tm-site-name-container">
  					<a href="#" class="tm-site-name">爱 煦</a>	
  				</div>
	  			<div class="col-lg-6 col-md-8 col-sm-9">
	  				<div class="mobile-menu-icon">
		              <i class="fa fa-bars"></i>
		            </div>
	  				<nav class="tm-nav">
						<ul>
							<li><a href="index.html">首页</a></li>
							<li><a href="product.html">产品中心</a></li>
							<li><a href="about.html">关于我们</a></li>
							<li><a href="login.html" class="active">登录</a></li>
						</ul>
					</nav>		
	  			</div>				
  			</div>
  		</div>	  	
  	</div>
	
	<!-- white bg -->
	<section class="tm-white-bg section-padding-bottom" id="more">
		<div class="container">
			<div class="row">
				<div class="tm-section-header section-margin-top">
					<div class="col-lg-4 col-md-3 col-sm-3"><hr></div>
					<div class="col-lg-4 col-md-6 col-sm-6"><h2 class="tm-section-title">欢迎来到爱煦</h2></div>
					<div class="col-lg-4 col-md-3 col-sm-3"><hr></div>	
				</div>				
			</div>
			
			<div class="row">
			<div class="col-xs-10 col-xs-offset-1 col-sm-8 col-sm-offset-2 col-md-4 col-md-offset-4">
				<div class="login-panel panel panel-default">
					<div class="panel-body">
						<fieldset>
							<div class="form-group">
								<input class="form-control" placeholder="用户名" id="username" type="username" autofocus="">
								<span style="color: red;" id="usernameMsg"></span>
							</div>
							<div class="form-group">
								<input class="form-control" placeholder="密码" id="password" type="password" value="">
								<span style="color: red;" id="passwordMsg"></span>
							</div>
							<button class="btn btn-primary" id="login">登录</button>
						</fieldset>
					</div>
				</div>
			</div>
			<!-- /.col-->
		</div>		
		</div>
	</section>
		<footer class="tm-black-bg">
			<div class="container">
				<div class="row">
					<p class="tm-copyright-text">Copyright &copy; 2084 爱煦
					</p>
				</div>
			</div>
		</footer>
	<script type="text/javascript" src="js/jquery-1.11.2.min.js"></script>      		<!-- jQuery -->
  	<script type="text/javascript" src="js/bootstrap.min.js"></script>					<!-- bootstrap js -->
  	<script type="text/javascript" src="js/jquery.flexslider-min.js"></script>			<!-- flexslider js -->
  	<script type="text/javascript" src="js/templatemo-script.js"></script>      		<!-- Templatemo Script -->
	<script>
	//var baseUrl = "http://localhost:8080/";
	 var baseUrl = "http://139.196.12.123:8080/";

		$(function() {

			// https://css-tricks.com/snippets/jquery/smooth-scrolling/
		  	$('a[href*=#]:not([href=#])').click(function() {
			    if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'') && location.hostname == this.hostname) {
			      var target = $(this.hash);
			      target = target.length ? target : $('[name=' + this.hash.slice(1) +']');
			      if (target.length) {
			        $('html,body').animate({
			          scrollTop: target.offset().top
			        }, 1000);
			        return false;
			      }
			    }
		  	});		  	
		});
		$(window).load(function(){
			// Flexsliders
		  	$('.flexslider.flexslider-banner').flexslider({
			    controlNav: false
		    });
		  	$('.flexslider').flexslider({
		    	animation: "slide",
		    	directionNav: false,
		    	slideshow: false
		  	});
		});

		var storage = window.localStorage;
			var token = storage.shopperToken;
			// if(token != undefined && token != "null") {
			// 	location.href = "about.html";
			// }

			$("#login").click(function() {
				var username = $("#username").val();
				if(username.length == 0) {
					$("#usernameMsg").html("用户名不能为空");
					return;
				}
				$("#usernameMsg").html("");
				var pwd = $("#password").val();
				if(pwd.length == 0) {
					$("#passwordMsg").html("密码不能为空");
					return;
				}
				$("#passwordMsg").html("");

				$.ajax({
					type: "post",
					url: baseUrl+ "shopper/common/login",
					async: false,
					contentType: "application/json",
					data: JSON.stringify({
						'loginName': username,
						'loginPassword': pwd
					}),
					success: function(data) {
						if(data.code == 200 && data.data.token != null) {
							storage.shopperToken = data.data.token;
							storage.shopperName = data.data.loginName;
							location.href = "index.html";
						} else {
							alert("用户名或者密码不正确");
						}
					},
					error: function(data) {
						if(data.status == 401) {
							//重新登录
							location.href = "login.html";
						} else {}
					}
				});
			})
	</script>
 </body>
 </html>
